<UserControl x:Class="GreenBill.MVVM.View.CampaignAnalytics"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:GreenBill.MVVM.View"
             xmlns:lvc="clr-namespace:LiveCharts.Wpf;assembly=LiveCharts.Wpf"
             mc:Ignorable="d" 
             d:DesignHeight="900" d:DesignWidth="1400"
             Background="#F5F5F5">
    <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
        <Grid Margin="20">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- Header Section -->
            <StackPanel Grid.Row="0" Margin="0,0,0,30">
                <TextBlock Text="Campaign Analytics" 
                          FontSize="32" 
                          FontWeight="Bold" 
                          Foreground="#2D2D2D"
                          Margin="0,0,0,10"/>
                <TextBlock Text="Track performance and insights across all your campaigns" 
                          FontSize="16" 
                          Foreground="#666666"
                          Margin="0,0,0,20"/>

                <!-- Time Period Selector -->
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="Time Period:" 
                              FontSize="14" 
                              FontWeight="SemiBold" 
                              Foreground="#2D2D2D"
                              VerticalAlignment="Center"
                              Margin="0,0,15,0"/>
                    <ComboBox Width="150" Height="35" FontSize="14" SelectedIndex="2">
                        <ComboBoxItem Content="Last 7 days"/>
                        <ComboBoxItem Content="Last 30 days"/>
                        <ComboBoxItem Content="Last 3 months"/>
                        <ComboBoxItem Content="Last 6 months"/>
                        <ComboBoxItem Content="Last year"/>
                    </ComboBox>
                </StackPanel>
            </StackPanel>

            <!-- Key Metrics Cards -->
            <Grid Grid.Row="1" Margin="0,0,0,30">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- Total Raised Card -->
                <Border Grid.Column="0" Background="White" CornerRadius="12" Margin="0,0,15,0">
                    <Border.Effect>
                        <DropShadowEffect Color="#000000" Opacity="0.08" BlurRadius="8" ShadowDepth="2"/>
                    </Border.Effect>
                    <StackPanel Margin="25,20">
                        <TextBlock Text="Total Raised" 
                                  FontSize="14" 
                                  Foreground="#666666" 
                                  Margin="0,0,0,8"/>
                        <TextBlock Text="$267,365" 
                                  FontSize="28" 
                                  FontWeight="Bold" 
                                  Foreground="#00A86B"
                                  Margin="0,0,0,5"/>
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="↗" 
                                      FontSize="16" 
                                      Foreground="#00A86B" 
                                      Margin="0,0,5,0"/>
                            <TextBlock Text="12.5% from last month" 
                                      FontSize="12" 
                                      Foreground="#00A86B"/>
                        </StackPanel>
                    </StackPanel>
                </Border>

                <!-- Total Donations Card -->
                <Border Grid.Column="1" Background="White" CornerRadius="12" Margin="0,0,15,0">
                    <Border.Effect>
                        <DropShadowEffect Color="#000000" Opacity="0.08" BlurRadius="8" ShadowDepth="2"/>
                    </Border.Effect>
                    <StackPanel Margin="25,20">
                        <TextBlock Text="Total Donations" 
                                  FontSize="14" 
                                  Foreground="#666666" 
                                  Margin="0,0,0,8"/>
                        <TextBlock Text="5,728" 
                                  FontSize="28" 
                                  FontWeight="Bold" 
                                  Foreground="#3498DB"
                                  Margin="0,0,0,5"/>
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="↗" 
                                      FontSize="16" 
                                      Foreground="#00A86B" 
                                      Margin="0,0,5,0"/>
                            <TextBlock Text="8.2% from last month" 
                                      FontSize="12" 
                                      Foreground="#00A86B"/>
                        </StackPanel>
                    </StackPanel>
                </Border>

                <!-- Average Donation Card -->
                <Border Grid.Column="2" Background="White" CornerRadius="12" Margin="0,0,15,0">
                    <Border.Effect>
                        <DropShadowEffect Color="#000000" Opacity="0.08" BlurRadius="8" ShadowDepth="2"/>
                    </Border.Effect>
                    <StackPanel Margin="25,20">
                        <TextBlock Text="Average Donation" 
                                  FontSize="14" 
                                  Foreground="#666666" 
                                  Margin="0,0,0,8"/>
                        <TextBlock Text="$46.70" 
                                  FontSize="28" 
                                  FontWeight="Bold" 
                                  Foreground="#E67E22"
                                  Margin="0,0,0,5"/>
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="↗" 
                                      FontSize="16" 
                                      Foreground="#00A86B" 
                                      Margin="0,0,5,0"/>
                            <TextBlock Text="3.8% from last month" 
                                      FontSize="12" 
                                      Foreground="#00A86B"/>
                        </StackPanel>
                    </StackPanel>
                </Border>

                <!-- Active Campaigns Card -->
                <Border Grid.Column="3" Background="White" CornerRadius="12">
                    <Border.Effect>
                        <DropShadowEffect Color="#000000" Opacity="0.08" BlurRadius="8" ShadowDepth="2"/>
                    </Border.Effect>
                    <StackPanel Margin="25,20">
                        <TextBlock Text="Active Campaigns" 
                                  FontSize="14" 
                                  Foreground="#666666" 
                                  Margin="0,0,0,8"/>
                        <TextBlock Text="6" 
                                  FontSize="28" 
                                  FontWeight="Bold" 
                                  Foreground="#9B59B6"
                                  Margin="0,0,0,5"/>
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="→" 
                                      FontSize="16" 
                                      Foreground="#666666" 
                                      Margin="0,0,5,0"/>
                            <TextBlock Text="No change" 
                                      FontSize="12" 
                                      Foreground="#666666"/>
                        </StackPanel>
                    </StackPanel>
                </Border>
            </Grid>

            <!-- Charts Section -->
            <Grid Grid.Row="2" Margin="0,0,0,30">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="2*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- Donations Over Time Chart -->
                <Border Grid.Column="0" Background="White" CornerRadius="12" Margin="0,0,15,0">
                    <Border.Effect>
                        <DropShadowEffect Color="#000000" Opacity="0.08" BlurRadius="8" ShadowDepth="2"/>
                    </Border.Effect>
                    <StackPanel Margin="25,20">
                        <TextBlock Text="Donations Over Time" 
                                  FontSize="18" 
                                  FontWeight="SemiBold" 
                                  Foreground="#2D2D2D"
                                  Margin="0,0,0,20"/>
                        <lvc:CartesianChart Height="300" AnimationsSpeed="0:0:0.5">
                            <lvc:CartesianChart.Series>
                                <lvc:LineSeries Title="Donations" 
                                              Values="15,25,30,22,35,42,38,45,52,48,55,60" 
                                              Stroke="#00A86B" 
                                              Fill="Transparent"
                                              StrokeThickness="3"
                                              PointGeometrySize="8"/>
                            </lvc:CartesianChart.Series>
                            <lvc:CartesianChart.AxisX>
                                <lvc:Axis Title="Months" Labels="Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec">
                                    <lvc:Axis.Separator>
                                        <lvc:Separator Stroke="#E0E0E0" StrokeThickness="1"/>
                                    </lvc:Axis.Separator>
                                </lvc:Axis>
                            </lvc:CartesianChart.AxisX>
                            <lvc:CartesianChart.AxisY>
                                <lvc:Axis Title="Amount ($K)">
                                    <lvc:Axis.Separator>
                                        <lvc:Separator Stroke="#E0E0E0" StrokeThickness="1"/>
                                    </lvc:Axis.Separator>
                                </lvc:Axis>
                            </lvc:CartesianChart.AxisY>
                        </lvc:CartesianChart>
                    </StackPanel>
                </Border>

                <!-- Campaign Performance Pie Chart -->
                <Border Grid.Column="1" Background="White" CornerRadius="12">
                    <Border.Effect>
                        <DropShadowEffect Color="#000000" Opacity="0.08" BlurRadius="8" ShadowDepth="2"/>
                    </Border.Effect>
                    <StackPanel Margin="25,20">
                        <TextBlock Text="Campaign Performance" 
                                  FontSize="18" 
                                  FontWeight="SemiBold" 
                                  Foreground="#2D2D2D"
                                  Margin="0,0,0,20"/>
                        <lvc:PieChart Height="300" AnimationsSpeed="0:0:0.5" Hoverable="True">
                            <lvc:PieChart.Series>
                                <lvc:PieSeries Title="Clean Ocean" Values="45665" Fill="#00A86B"/>
                                <lvc:PieSeries Title="Solar Energy" Values="67120" Fill="#F39C12"/>
                                <lvc:PieSeries Title="Wildlife" Values="34250" Fill="#9B59B6"/>
                                <lvc:PieSeries Title="Reforestation" Values="28340" Fill="#E67E22"/>
                                <lvc:PieSeries Title="Climate Fund" Values="89430" Fill="#27AE60"/>
                                <lvc:PieSeries Title="Plastic Reduction" Values="12890" Fill="#3498DB"/>
                            </lvc:PieChart.Series>
                        </lvc:PieChart>
                    </StackPanel>
                </Border>
            </Grid>

            <!-- Detailed Campaign Performance Table -->
            <Border Grid.Row="3" Background="White" CornerRadius="12">
                <Border.Effect>
                    <DropShadowEffect Color="#000000" Opacity="0.08" BlurRadius="8" ShadowDepth="2"/>
                </Border.Effect>
                <StackPanel Margin="25,20">
                    <StackPanel Orientation="Horizontal" Margin="0,0,0,20">
                        <TextBlock Text="Campaign Performance Details" 
                                  FontSize="18" 
                                  FontWeight="SemiBold" 
                                  Foreground="#2D2D2D"
                                  VerticalAlignment="Center"/>
                        <Button Content="Export Data" 
                               Background="#00A86B" 
                               Foreground="White"
                               FontSize="12"
                               Padding="15,8"
                               BorderThickness="0"
                               Margin="20,0,0,0"
                               Cursor="Hand">
                            <Button.Style>
                                <Style TargetType="Button">
                                    <Setter Property="Template">
                                        <Setter.Value>
                                            <ControlTemplate TargetType="Button">
                                                <Border Background="{TemplateBinding Background}" 
                                                       CornerRadius="6"
                                                       Padding="{TemplateBinding Padding}">
                                                    <ContentPresenter HorizontalAlignment="Center" 
                                                                    VerticalAlignment="Center"/>
                                                </Border>
                                                <ControlTemplate.Triggers>
                                                    <Trigger Property="IsMouseOver" Value="True">
                                                        <Setter Property="Background" Value="#009960"/>
                                                    </Trigger>
                                                </ControlTemplate.Triggers>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </Style>
                            </Button.Style>
                        </Button>
                    </StackPanel>

                    <DataGrid AutoGenerateColumns="False" 
                             CanUserAddRows="False" 
                             CanUserDeleteRows="False"
                             CanUserResizeRows="False"
                             HeadersVisibility="Column"
                             GridLinesVisibility="Horizontal"
                             HorizontalGridLinesBrush="#E0E0E0"
                             VerticalGridLinesBrush="Transparent"
                             Background="Transparent"
                             RowBackground="Transparent"
                             AlternatingRowBackground="#F8F9FA"
                             FontSize="14"
                             Height="300">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Campaign Name" Width="200" IsReadOnly="True">
                                <DataGridTextColumn.ElementStyle>
                                    <Style TargetType="TextBlock">
                                        <Setter Property="Padding" Value="15,10"/>
                                        <Setter Property="FontWeight" Value="SemiBold"/>
                                        <Setter Property="Foreground" Value="#2D2D2D"/>
                                    </Style>
                                </DataGridTextColumn.ElementStyle>
                            </DataGridTextColumn>
                            <DataGridTextColumn Header="Amount Raised" Width="130" IsReadOnly="True">
                                <DataGridTextColumn.ElementStyle>
                                    <Style TargetType="TextBlock">
                                        <Setter Property="Padding" Value="15,10"/>
                                        <Setter Property="FontWeight" Value="Bold"/>
                                        <Setter Property="Foreground" Value="#00A86B"/>
                                    </Style>
                                </DataGridTextColumn.ElementStyle>
                            </DataGridTextColumn>
                            <DataGridTextColumn Header="Goal" Width="120" IsReadOnly="True">
                                <DataGridTextColumn.ElementStyle>
                                    <Style TargetType="TextBlock">
                                        <Setter Property="Padding" Value="15,10"/>
                                        <Setter Property="Foreground" Value="#666666"/>
                                    </Style>
                                </DataGridTextColumn.ElementStyle>
                            </DataGridTextColumn>
                            <DataGridTextColumn Header="Progress" Width="100" IsReadOnly="True">
                                <DataGridTextColumn.ElementStyle>
                                    <Style TargetType="TextBlock">
                                        <Setter Property="Padding" Value="15,10"/>
                                        <Setter Property="FontWeight" Value="SemiBold"/>
                                        <Setter Property="Foreground" Value="#3498DB"/>
                                    </Style>
                                </DataGridTextColumn.ElementStyle>
                            </DataGridTextColumn>
                            <DataGridTextColumn Header="Donations" Width="100" IsReadOnly="True">
                                <DataGridTextColumn.ElementStyle>
                                    <Style TargetType="TextBlock">
                                        <Setter Property="Padding" Value="15,10"/>
                                        <Setter Property="Foreground" Value="#666666"/>
                                    </Style>
                                </DataGridTextColumn.ElementStyle>
                            </DataGridTextColumn>
                            <DataGridTextColumn Header="Avg. Donation" Width="120" IsReadOnly="True">
                                <DataGridTextColumn.ElementStyle>
                                    <Style TargetType="TextBlock">
                                        <Setter Property="Padding" Value="15,10"/>
                                        <Setter Property="Foreground" Value="#E67E22"/>
                                    </Style>
                                </DataGridTextColumn.ElementStyle>
                            </DataGridTextColumn>
                            <DataGridTextColumn Header="Status" Width="*" IsReadOnly="True">
                                <DataGridTextColumn.ElementStyle>
                                    <Style TargetType="TextBlock">
                                        <Setter Property="Padding" Value="15,10"/>
                                        <Setter Property="FontWeight" Value="SemiBold"/>
                                    </Style>
                                </DataGridTextColumn.ElementStyle>
                            </DataGridTextColumn>
                        </DataGrid.Columns>

                        <!-- Sample Data - Replace with actual binding -->
                        <DataGrid.Items>
                            <local:CampaignData CampaignName="Climate Action Fund" AmountRaised="$89,430" Goal="$100,000" Progress="89.4%" Donations="1,890" AvgDonation="$47.32" Status="Active"/>
                            <local:CampaignData CampaignName="Solar Energy for Schools" AmountRaised="$67,120" Goal="$75,000" Progress="89.5%" Donations="1,240" AvgDonation="$54.13" Status="Active"/>
                            <local:CampaignData CampaignName="Clean Ocean Initiative" AmountRaised="$45,665" Goal="$60,000" Progress="76.1%" Donations="980" AvgDonation="$46.60" Status="Active"/>
                            <local:CampaignData CampaignName="Wildlife Conservation" AmountRaised="$34,250" Goal="$50,000" Progress="68.5%" Donations="678" AvgDonation="$50.52" Status="Active"/>
                            <local:CampaignData CampaignName="Reforestation Project" AmountRaised="$28,340" Goal="$40,000" Progress="70.9%" Donations="456" AvgDonation="$62.15" Status="Active"/>
                            <local:CampaignData CampaignName="Plastic Waste Reduction" AmountRaised="$12,890" Goal="$25,000" Progress="51.6%" Donations="234" AvgDonation="$55.08" Status="Active"/>
                        </DataGrid.Items>
                    </DataGrid>
                </StackPanel>
            </Border>
        </Grid>
    </ScrollViewer>
</UserControl>