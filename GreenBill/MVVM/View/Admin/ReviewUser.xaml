<UserControl
    x:Class="GreenBill.MVVM.View.Admin.ReviewUser"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    VerticalContentAlignment="Stretch"
    d:DesignHeight="900"
    d:DesignWidth="1400"
    Background="#f0f2f5"
    mc:Ignorable="d">
    <UserControl.Resources>
        <SolidColorBrush x:Key="Muted" Color="#8A8F95" />
        <SolidColorBrush x:Key="Value" Color="#263238" />
        <SolidColorBrush x:Key="CardBg" Color="#FFFFFF" />
        <SolidColorBrush x:Key="FieldBg" Color="#FBFCFD" />
        <DropShadowEffect
            x:Key="SoftShadow"
            BlurRadius="8"
            Opacity="0.08"
            ShadowDepth="1"
            Color="#000000" />

        <Style x:Key="FieldLabel" TargetType="TextBlock">
            <Setter Property="FontSize" Value="12" />
            <Setter Property="Foreground" Value="{StaticResource Muted}" />
            <Setter Property="FontWeight" Value="Normal" />
        </Style>

        <Style x:Key="FieldValue" TargetType="TextBlock">
            <Setter Property="FontSize" Value="14" />
            <Setter Property="Foreground" Value="{StaticResource Value}" />
            <Setter Property="FontWeight" Value="SemiBold" />
            <Setter Property="TextWrapping" Value="Wrap" />
        </Style>

        <Style x:Key="FieldCard" TargetType="Border">
            <Setter Property="Background" Value="{StaticResource FieldBg}" />
            <Setter Property="CornerRadius" Value="8" />
            <Setter Property="Padding" Value="12" />
            <Setter Property="Margin" Value="0,0,12,12" />
            <Setter Property="Effect" Value="{StaticResource SoftShadow}" />
            <Setter Property="BorderBrush" Value="#E6E9EB" />
            <Setter Property="BorderThickness" Value="1" />
        </Style>
    </UserControl.Resources>

    <Grid VerticalAlignment="Stretch">
        <Border VerticalAlignment="Stretch">
            <!--  Use a Grid so one row can take all remaining height  -->
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <!--  header  -->
                    <RowDefinition Height="*" />
                    <!--  main content stretches  -->
                </Grid.RowDefinitions>

                <!--  Header  -->
                <StackPanel
                    Grid.Row="0"
                    Margin="30,30,0,0"
                    HorizontalAlignment="Left">
                    <Button
                        Command="{Binding NavigateBack}"
                        Content="Back"
                        Style="{StaticResource BackButtonStyle}" />
                </StackPanel>

                <!--  Main Content  -->
                <Border
                    Grid.Row="1"
                    Margin="30"
                    Padding="35"
                    Background="White"
                    BorderBrush="#E0E0E0"
                    BorderThickness="1"
                    CornerRadius="12"
                    Effect="{DynamicResource DropShadowEffect}">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="340" />
                            <ColumnDefinition Width="80*" />
                        </Grid.ColumnDefinitions>


                        <StackPanel Grid.Column="0" HorizontalAlignment="Center">
                            <!--  Image  -->

                            <Border
                                Height="280"
                                MinWidth="280"
                                Background="#FFF"
                                BorderBrush="#E6E9EB"
                                BorderThickness="1"
                                CornerRadius="8">
                                <Button
                                    Background="Transparent"
                                    BorderThickness="0"
                                    Command="{Binding PreviewImageCommand}"
                                    CommandParameter="{Binding SelectedUser.Profile}"
                                    Cursor="Hand"
                                    Focusable="False">
                                    <Button.Template>
                                        <ControlTemplate TargetType="Button">
                                            <Grid>

                                                <Image Source="{Binding SelectedUser.Profile, Converter={StaticResource ImageConverter}}" Stretch="UniformToFill" />

                                                <!--  Dark overlay  -->
                                                <Rectangle
                                                    x:Name="Overlay"
                                                    Fill="Black"
                                                    IsHitTestVisible="False"
                                                    Opacity="0" />
                                            </Grid>

                                            <!--  Hover trigger  -->
                                            <ControlTemplate.Triggers>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter TargetName="Overlay" Property="Opacity" Value="0.2" />
                                                </Trigger>
                                            </ControlTemplate.Triggers>
                                        </ControlTemplate>
                                    </Button.Template>
                                </Button>
                            </Border>

                            <!--  Image  -->
                        </StackPanel>

                        <Grid Grid.Column="1" Margin="50,0,0,0">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="*" />
                            </Grid.RowDefinitions>
                            <ScrollViewer
                                MaxHeight="{Binding ActualHeight, RelativeSource={RelativeSource AncestorType=Border}}"
                                CanContentScroll="False"
                                Focusable="False"
                                HorizontalScrollBarVisibility="Disabled"
                                PanningMode="VerticalOnly"
                                SnapsToDevicePixels="True"
                                UseLayoutRounding="True"
                                VerticalScrollBarVisibility="Hidden">



                                <!--  Modern field grid: each item kept (ID, Stripe Account ID, First Name, ...) but rendered as cards  -->
                                <UniformGrid
                                    Margin="0,0,0,8"
                                    VerticalAlignment="Top"
                                    Columns="1"
                                    Rows="0">
                                    <!--  ID  -->
                                    <Border Style="{StaticResource FieldCard}">
                                        <StackPanel>
                                            <TextBlock Style="{StaticResource FieldLabel}" Text="ID" />
                                            <TextBlock Style="{StaticResource FieldValue}" Text="{Binding SelectedUser.Id}" />
                                        </StackPanel>
                                    </Border>

                                    <!--  Stripe Account ID  -->
                                    <Border Style="{StaticResource FieldCard}">
                                        <StackPanel>
                                            <TextBlock Style="{StaticResource FieldLabel}" Text="Stripe Account ID" />
                                            <TextBlock Style="{StaticResource FieldValue}" Text="{Binding SelectedUser.StripeAccountId}" />
                                        </StackPanel>
                                    </Border>

                                    <!--  First Name  -->
                                    <Border Style="{StaticResource FieldCard}">
                                        <StackPanel>
                                            <TextBlock Style="{StaticResource FieldLabel}" Text="First Name" />
                                            <TextBlock Style="{StaticResource FieldValue}" Text="{Binding SelectedUser.FirstName}" />
                                        </StackPanel>
                                    </Border>

                                    <!--  Last Name  -->
                                    <Border Style="{StaticResource FieldCard}">
                                        <StackPanel>
                                            <TextBlock Style="{StaticResource FieldLabel}" Text="Last Name" />
                                            <TextBlock Style="{StaticResource FieldValue}" Text="{Binding SelectedUser.LastName}" />
                                        </StackPanel>
                                    </Border>

                                    <!--  Username  -->
                                    <Border Style="{StaticResource FieldCard}">
                                        <StackPanel>
                                            <TextBlock Style="{StaticResource FieldLabel}" Text="Username" />
                                            <TextBlock Style="{StaticResource FieldValue}" Text="{Binding SelectedUser.Username}" />
                                        </StackPanel>
                                    </Border>

                                    <!--  Email  -->
                                    <Border Style="{StaticResource FieldCard}">
                                        <StackPanel>
                                            <TextBlock Style="{StaticResource FieldLabel}" Text="Email" />
                                            <TextBlock Style="{StaticResource FieldValue}" Text="{Binding SelectedUser.Email}" />
                                        </StackPanel>
                                    </Border>

                                    <!--  Password (masked for safety)  -->
                                    <Border Style="{StaticResource FieldCard}">
                                        <StackPanel>


                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition />
                                                    <ColumnDefinition Width="Auto" />
                                                </Grid.ColumnDefinitions>

                                                <StackPanel Grid.Column="0">
                                                    <TextBlock Style="{StaticResource FieldLabel}" Text="Password" />
                                                    <!--  Left text  -->
                                                    <TextBlock
                                                        FontStyle="Italic"
                                                        Style="{StaticResource FieldValue}"
                                                        Text="{Binding Passwords}" />
                                                </StackPanel>

                                                <!--  Right icon  -->
                                                <Button
                                                    Grid.Column="1"
                                                    Background="Transparent"
                                                    BorderBrush="Transparent"
                                                    Command="{Binding ShowPasswordCommand}"
                                                    Cursor="Hand"
                                                    FocusVisualStyle="{x:Null}">

                                                    <Button.Style>
                                                        <Style TargetType="Button">
                                                            <Setter Property="Template">
                                                                <Setter.Value>
                                                                    <ControlTemplate TargetType="Button">
                                                                        <Border Background="Transparent">
                                                                            <ContentPresenter HorizontalAlignment="Right" VerticalAlignment="Center" />
                                                                        </Border>

                                                                        <ControlTemplate.Triggers>
                                                                            <!--  Remove hover highlight  -->
                                                                            <Trigger Property="IsMouseOver" Value="True">
                                                                                <Setter Property="Background" Value="Transparent" />
                                                                            </Trigger>

                                                                            <!--  Remove pressed highlight  -->
                                                                            <Trigger Property="IsPressed" Value="True">
                                                                                <Setter Property="Background" Value="Transparent" />
                                                                            </Trigger>
                                                                        </ControlTemplate.Triggers>

                                                                    </ControlTemplate>
                                                                </Setter.Value>
                                                            </Setter>
                                                        </Style>
                                                    </Button.Style>

                                                    <Viewbox Width="20" Cursor="Hand">
                                                        <Path Data="M2 12C2 13.6394 2.42496 14.1915 3.27489 15.2957C4.97196 17.5004 7.81811 20 12 20C16.1819 20 19.028 17.5004 20.7251 15.2957C21.575 14.1915 22 13.6394 22 12C22 10.3606 21.575 9.80853 20.7251 8.70433C19.028 6.49956 16.1819 4 12 4C7.81811 4 4.97196 6.49956 3.27489 8.70433C2.42496 9.80853 2 10.3606 2 12ZM12 8.25C9.92893 8.25 8.25 9.92893 8.25 12C8.25 14.0711 9.92893 15.75 12 15.75C14.0711 15.75 15.75 14.0711 15.75 12C15.75 9.92893 14.0711 8.25 12 8.25Z" Fill="#005449" />
                                                    </Viewbox>

                                                </Button>

                                            </Grid>
                                        </StackPanel>
                                    </Border>



                                    <!--  Verification Status  -->
                                    <Border Style="{StaticResource FieldCard}">
                                        <StackPanel>
                                            <TextBlock Style="{StaticResource FieldLabel}" Text="Verification Status" />
                                            <TextBlock Style="{StaticResource FieldValue}" Text="{Binding SelectedUser.VerificationStatus}" />
                                        </StackPanel>
                                    </Border>

                                    <!--  Can Receive Funds  -->
                                    <Border Style="{StaticResource FieldCard}">
                                        <StackPanel>
                                            <TextBlock Style="{StaticResource FieldLabel}" Text="Can Receive Funds" />
                                            <TextBlock Style="{StaticResource FieldValue}" Text="{Binding SelectedUser.CanReceiveFunds}" />
                                        </StackPanel>
                                    </Border>

                                    <!--  Created At  -->
                                    <Border Style="{StaticResource FieldCard}">
                                        <StackPanel>
                                            <TextBlock Style="{StaticResource FieldLabel}" Text="Created At" />
                                            <TextBlock Style="{StaticResource FieldValue}" Text="{Binding SelectedUser.CreatedAt}" />
                                        </StackPanel>
                                    </Border>
                                </UniformGrid>
                            </ScrollViewer>
                        </Grid>

                    </Grid>
                </Border>
            </Grid>
        </Border>
    </Grid>
</UserControl>