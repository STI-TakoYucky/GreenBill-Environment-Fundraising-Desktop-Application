<UserControl x:Class="GreenBill.MVVM.View.Signin"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
      xmlns:local="clr-namespace:GreenBill.MVVM.View"
              xmlns:helpers="clr-namespace:GreenBill.Helpers"
      mc:Ignorable="d" 
        d:DesignHeight="900" d:DesignWidth="1400"
 Background="#F5F5F5">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <Border Grid.Row="1" 
        Background="White"
        CornerRadius="16"
        Padding="40"
        MaxWidth="420"
                Width="700"
        HorizontalAlignment="Center"
        VerticalAlignment="Center">
            <Border.Effect>
                <DropShadowEffect Color="Gray" 
                        Opacity="0.1" 
                        ShadowDepth="4" 
                        BlurRadius="16"/>
            </Border.Effect>

            <StackPanel>
                <!-- Logo -->
                <Image Source="/Assets/Images/logo.png"
              Width="100"
              Height="86"
              HorizontalAlignment="Center"
              Margin="0,0,0,0"
              Stretch="Uniform"/>

                <TextBlock Text="Sign in"
                  FontSize="32"
                  FontWeight="SemiBold"
                  Foreground="#2C2C2C"
                  HorizontalAlignment="Left"
                  Margin="0,0,0,24"/>

                <StackPanel Margin="0,0,0,24">
                    <Grid>
                        <TextBox Name="EmailTextBox"
            Text="{Binding Email, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
            Height="50"
            Padding="16,12"
            FontSize="16"
            BorderBrush="#E0E0E0"
            BorderThickness="1"
            Background="White"
            Foreground="#2C2C2C"/>

                        <TextBlock Text="Email Address"
                  Foreground="#999"
                  VerticalAlignment="Center"
                  Margin="18,0"
                  IsHitTestVisible="False">
                            <TextBlock.Style>
                                <Style TargetType="TextBlock">
                                    <Setter Property="Visibility" Value="Collapsed"/>
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding Text, ElementName=EmailTextBox}" Value="">
                                            <Setter Property="Visibility" Value="Visible"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </TextBlock.Style>
                        </TextBlock>
                    </Grid>

                    <TextBlock Name="EmailValidation"
          Text="Please fill out this field."
          FontSize="14"
          Foreground="Red"
          Margin="0,4,0,0"
          Visibility="Collapsed"/>
                </StackPanel>
                <StackPanel Margin="0,0,0,24">
                    <Grid>
                        <PasswordBox Name="PasswordBox"
                     helpers:PasswordBoxHelper.BoundPassword="{Binding Password, Mode=TwoWay}"
                     helpers:PasswordBoxHelper.BindPassword="True"
                     PasswordChanged="PasswordBox_PasswordChanged"
                     Height="50"
                     Padding="16,12"
                     FontSize="16"
                     BorderBrush="#E0E0E0"
                     BorderThickness="1"
                     Background="White"
                     Foreground="#2C2C2C"/>

                        <TextBox Name="PasswordTextBox"
                 Text=""
                 TextChanged="PasswordTextBox_TextChanged"
                 Height="50"
                 Padding="16,12"
                 FontSize="16"
                 BorderBrush="#E0E0E0"
                 BorderThickness="1"
                 Background="White"
                 Foreground="#2C2C2C"
                 Visibility="Collapsed"/>

                        <TextBlock Name="PasswordPlaceholder"
                   Text="Password"
                   Foreground="#999"
                   VerticalAlignment="Center"
                   Margin="18,0,50,0"
                   IsHitTestVisible="False"/>

                        <Button Name="ShowPasswordButton"
            Width="24"
            Height="24"
            HorizontalAlignment="Right"
            VerticalAlignment="Center"
            Margin="0,0,16,0"
            Background="Transparent"
            BorderThickness="0"
            Cursor="Hand"
            Click="ShowPasswordButton_Click">
                            <Path Name="EyeIcon"
                  Data="M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z"
                  Fill="#999"
                  Stretch="Uniform"
                  Width="16"
                  Height="16"/>
                        </Button>
                    </Grid>

                    <TextBlock Name="PasswordValidation"
           Text="{Binding ErrorMessage, Mode=TwoWay}"
           FontSize="14"
           Foreground="Red"
           Margin="0,4,0,0"/>
                </StackPanel>

                <Button Name="SignUpButton"
                          IsEnabled="{Binding IsLoading, Converter={StaticResource InverseBooleanToVisibilityConverter}}"
                          Style="{StaticResource PrimaryButton}"
                          Cursor="Hand"
                          Content="Sign in"
                          Command="{Binding Login}"
                          Height="50"
                          FontSize="16"
                          FontWeight="SemiBold"
                          Margin="0,0,0,0"/>

                <Button FontSize="14"
                        Style="{StaticResource TransparentButton}"
                        Command="{Binding NavigateToSignup}"
          Foreground="#666"
                BorderThickness="0"
                        Cursor="Hand"
           Background="Transparent"
          Width="340" Content="Don't have an account?"/>

                <Button Name="BackButton"
                        Command="{Binding NavigateToHome}"
               Content="Back"
               Background="Transparent"
               BorderThickness="0"
               FontSize="16"
               Foreground="#666"
               HorizontalAlignment="Left"
               Padding="0"
               Cursor="Hand">
                    <Button.Style>
                        <Style TargetType="Button">
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="Button">
                                        <TextBlock Text="{TemplateBinding Content}"
                                          Foreground="{TemplateBinding Foreground}"
                                          FontSize="{TemplateBinding FontSize}"
                                          HorizontalAlignment="Center"
                                          VerticalAlignment="Center"/>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                            <Style.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter Property="Foreground" Value="#333"/>
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </Button.Style>
                </Button>

            </StackPanel>
        </Border>
    </Grid>
</UserControl>
