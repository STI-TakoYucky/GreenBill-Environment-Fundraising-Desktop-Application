<UserControl
    x:Class="GreenBill.MVVM.View.Admin.CreateAdminAcc"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:helpers="clr-namespace:GreenBill.Helpers"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:sys="clr-namespace:System;assembly=mscorlib"
    d:DesignHeight="900"
    d:DesignWidth="1400"
    Background="#f4f4f4"
    mc:Ignorable="d">

    <UserControl.Resources>
        <Style x:Key="ModernTextBox" TargetType="TextBox">
            <Setter Property="Height" Value="45" />
            <Setter Property="Padding" Value="15,10" />
            <Setter Property="FontSize" Value="14" />
            <Setter Property="Background" Value="White" />
            <Setter Property="BorderBrush" Value="#E0E0E0" />
            <Setter Property="BorderThickness" Value="1" />
            <Setter Property="Foreground" Value="#333333" />
            <Setter Property="CaretBrush" Value="#4CAF50" />
            <Setter Property="VerticalContentAlignment" Value="Center" />
            <Style.Triggers>
                <Trigger Property="IsFocused" Value="True">
                    <Setter Property="BorderBrush" Value="#4CAF50" />
                    <Setter Property="BorderThickness" Value="2" />
                    <Setter Property="Background" Value="#FAFAFA" />
                </Trigger>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="BorderBrush" Value="#D0D0D0" />
                </Trigger>
            </Style.Triggers>
        </Style>


        <Style x:Key="ModernComboBox" TargetType="ComboBox">
            <Setter Property="Background" Value="White" />
            <Setter Property="BorderBrush" Value="#E3E7EA" />
            <Setter Property="BorderThickness" Value="1" />
            <Setter Property="Padding" Value="8,6" />
            <Setter Property="FontSize" Value="14" />
            <Setter Property="Margin" Value="0,6,0,6" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ComboBox">
                        <Grid>
                            <Border
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="8">
                                <DockPanel Margin="8,0">
                                    <ContentPresenter VerticalAlignment="Center" Content="{TemplateBinding SelectionBoxItem}" />
                                    <ToggleButton
                                        Width="30"
                                        Background="Transparent"
                                        BorderThickness="0"
                                        DockPanel.Dock="Right"
                                        IsChecked="{Binding IsDropDownOpen, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}">
                                        <Path
                                            HorizontalAlignment="Center"
                                            VerticalAlignment="Center"
                                            Data="M 0 0 L 8 0 L 4 5 Z"
                                            Fill="#666"
                                            Stretch="Uniform" />
                                    </ToggleButton>
                                </DockPanel>
                            </Border>
                            <Popup
                                AllowsTransparency="True"
                                IsOpen="{TemplateBinding IsDropDownOpen}"
                                Placement="Bottom"
                                PopupAnimation="Fade">
                                <Border
                                    Padding="6"
                                    Background="White"
                                    BorderBrush="#E3E7EA"
                                    BorderThickness="1"
                                    CornerRadius="8">
                                    <ScrollViewer MaxHeight="200">
                                        <ItemsPresenter />
                                    </ScrollViewer>
                                </Border>
                            </Popup>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="ModernButton" TargetType="Button">
            <Setter Property="Height" Value="45" />
            <Setter Property="FontSize" Value="14" />
            <Setter Property="FontWeight" Value="SemiBold" />
            <Setter Property="Cursor" Value="Hand" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border
                            Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            CornerRadius="8">
                            <ContentPresenter
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                Content="{TemplateBinding Content}" />
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Opacity" Value="0.9" />
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Opacity" Value="0.8" />
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style
            x:Key="PrimaryButton"
            BasedOn="{StaticResource ModernButton}"
            TargetType="Button">
            <Setter Property="Background" Value="#4CAF50" />
            <Setter Property="Foreground" Value="White" />
            <Setter Property="BorderThickness" Value="0" />
            <Setter Property="Padding" Value="12,8" />
            <Setter Property="Margin" Value="8,0,0,0" />
        </Style>

        <Style
            x:Key="SecondaryButton"
            BasedOn="{StaticResource ModernButton}"
            TargetType="Button">
            <Setter Property="Background" Value="White" />
            <Setter Property="Foreground" Value="#4CAF50" />
            <Setter Property="BorderBrush" Value="#4CAF50" />
            <Setter Property="BorderThickness" Value="2" />
            <Setter Property="Padding" Value="12,8" />
        </Style>

        <Style x:Key="BadgeStyle" TargetType="Border">
            <Setter Property="CornerRadius" Value="15" />
            <Setter Property="Padding" Value="12,6" />
            <Setter Property="HorizontalAlignment" Value="Left" />
            <Setter Property="Margin" Value="5,0" />
        </Style>

        <Style x:Key="CardStyle" TargetType="Border">
            <Setter Property="Background" Value="White" />
            <Setter Property="CornerRadius" Value="12" />
            <Setter Property="Padding" Value="30" />
            <Setter Property="Margin" Value="10" />
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect
                        BlurRadius="10"
                        Direction="270"
                        Opacity="0.1"
                        ShadowDepth="2"
                        Color="Black" />
                </Setter.Value>
            </Setter>
        </Style>
    </UserControl.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="80" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>
        <!--  Header  -->
        <StackPanel
            Grid.Row="0"
            Margin="30,30,30,0"
            HorizontalAlignment="Left">
            <Button
                Command="{Binding NavigateBack}"
                Content="Back"
                Style="{StaticResource BackButtonStyle}" />
        </StackPanel>

        <Grid Grid.Row="1" Margin="20,0,20,20">

            <Border
                HorizontalAlignment="Stretch"
                VerticalAlignment="Stretch"
                Style="{StaticResource CardStyle}">

                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="300" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>

                    <StackPanel Grid.Column="0" Margin="0,0,40,0">
                        <TextBlock
                            Margin="0,0,0,20"
                            FontSize="18"
                            FontWeight="SemiBold"
                            Foreground="#333333"
                            Text="Profile Picture" />

                        <Border
                            Width="200"
                            Height="200"
                            Margin="0,0,0,20"
                            HorizontalAlignment="Center"
                            BorderBrush="#E0E0E0"
                            BorderThickness="2"
                            CornerRadius="100">
                            <Border.Background>
                                <ImageBrush
                                    x:Name="ProfileImageBrush"
                                    ImageSource="{Binding ProfileImage}"
                                    Stretch="UniformToFill" />
                            </Border.Background>
                            <Grid>
                                <Border
                                    x:Name="ImageOverlay"
                                    Background="Black"
                                    CornerRadius="100"
                                    Opacity="0.3"
                                    Visibility="Collapsed" />
                                <Button
                                    x:Name="ChangePhotoButton"
                                    Background="Transparent"
                                    BorderThickness="0"
                                    Cursor="Hand"
                                    ToolTip="Change Profile Picture">
                                    <Button.Template>
                                        <ControlTemplate>
                                            <Grid>
                                                <Ellipse Fill="Transparent" />
                                            </Grid>
                                        </ControlTemplate>
                                    </Button.Template>
                                </Button>
                            </Grid>
                        </Border>
                    </StackPanel>

                    <!--  RIGHT FORM SECTION  -->
                    <ScrollViewer
                        Grid.Column="1"
                        VerticalAlignment="Stretch"
                        VerticalScrollBarVisibility="Hidden">
                        <StackPanel Grid.Column="1">
                            <TextBlock
                                Margin="0,0,0,30"
                                FontSize="18"
                                FontWeight="SemiBold"
                                Foreground="#333"
                                Text="Administrator Information" />

                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="20" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>

                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="20" />
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="20" />
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="20" />
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="20" />
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="100" />
                                </Grid.RowDefinitions>

                                <!--  FIRST NAME  -->
                                <StackPanel Grid.Row="0" Grid.Column="0">
                                    <TextBlock
                                        Margin="0,0,0,8"
                                        FontWeight="Medium"
                                        Foreground="#555"
                                        Text="First Name" />
                                    <TextBox Style="{StaticResource ModernTextBox}" Text="{Binding FirstName, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                    <TextBlock
                                        Name="FirstNameValidation"
                                        FontSize="14"
                                        Foreground="Red"
                                        Text="{Binding FirstNameError, Mode=TwoWay}" />
                                </StackPanel>

                                <!--  LAST NAME  -->
                                <StackPanel Grid.Row="0" Grid.Column="2">
                                    <TextBlock
                                        Margin="0,0,0,8"
                                        FontWeight="Medium"
                                        Foreground="#555"
                                        Text="Last Name" />
                                    <TextBox Style="{StaticResource ModernTextBox}" Text="{Binding LastName, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                    <TextBlock
                                        Name="LastNameValidation"
                                        FontSize="14"
                                        Foreground="Red"
                                        Text="{Binding LastNameError, Mode=TwoWay}" />
                                </StackPanel>

                                <!--  USERNAME  -->
                                <StackPanel
                                    Grid.Row="2"
                                    Grid.Column="0"
                                    Grid.ColumnSpan="3">
                                    <TextBlock
                                        Margin="0,0,0,8"
                                        FontWeight="Medium"
                                        Foreground="#555"
                                        Text="Username" />
                                    <TextBox Style="{StaticResource ModernTextBox}" Text="{Binding Username, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                    <TextBlock
                                        Name="UsernameValidation"
                                        FontSize="14"
                                        Foreground="Red"
                                        Text="{Binding UsernameError, Mode=TwoWay}" />
                                </StackPanel>

                                <!--  EMAIL  -->
                                <StackPanel
                                    Grid.Row="4"
                                    Grid.Column="0"
                                    Grid.ColumnSpan="3">
                                    <TextBlock
                                        Margin="0,0,0,8"
                                        FontWeight="Medium"
                                        Foreground="#555"
                                        Text="Email" />
                                    <TextBox Style="{StaticResource ModernTextBox}" Text="{Binding Email, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                    <TextBlock
                                        Name="EmailValidation"
                                        FontSize="14"
                                        Foreground="Red"
                                        Text="{Binding EmailError, Mode=TwoWay}" />
                                </StackPanel>



                                <StackPanel Grid.Row="6" Grid.ColumnSpan="3">
                                    <TextBlock
                                        Margin="0,0,0,8"
                                        FontWeight="Medium"
                                        Foreground="#555"
                                        Text="Password" />
                                    <Grid>
                                        <PasswordBox
                                            Name="PasswordBox"
                                            Height="50"
                                            Padding="16,12"
                                            helpers:PasswordBoxHelper.BindPassword="True"
                                            helpers:PasswordBoxHelper.BoundPassword="{Binding Password, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                            Background="White"
                                            BorderBrush="#E0E0E0"
                                            BorderThickness="1"
                                            FontSize="16"
                                            Foreground="#2C2C2C"
                                            PasswordChanged="PasswordBox_PasswordChanged" />

                                        <TextBox
                                            Name="PasswordTextBox"
                                            Height="50"
                                            Padding="16,12"
                                            Background="White"
                                            BorderBrush="#E0E0E0"
                                            BorderThickness="1"
                                            FontSize="16"
                                            Foreground="#2C2C2C"
                                            Text=""
                                            TextChanged="PasswordTextBox_TextChanged"
                                            Visibility="Collapsed" />

                                        <TextBlock
                                            Name="PasswordPlaceholder"
                                            Margin="18,0,50,0"
                                            VerticalAlignment="Center"
                                            Foreground="#999"
                                            IsHitTestVisible="False"
                                            Text="Password" />

                                        <Button
                                            Name="ShowPasswordButton"
                                            Width="24"
                                            Height="24"
                                            Margin="0,0,16,0"
                                            HorizontalAlignment="Right"
                                            VerticalAlignment="Center"
                                            Background="Transparent"
                                            BorderThickness="0"
                                            Click="ShowPasswordButton_Click"
                                            Cursor="Hand">
                                            <Path
                                                Name="EyeIcon"
                                                Width="16"
                                                Height="16"
                                                Data="M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z"
                                                Fill="#999"
                                                Stretch="Uniform" />
                                        </Button>
                                    </Grid>
                                    <TextBlock
                                        Name="PasswordValidation"
                                        FontSize="14"
                                        Foreground="Red"
                                        Text="{Binding PasswordError, Mode=TwoWay}" />
                                </StackPanel>



                                <!--  ROLE  -->
                                <StackPanel
                                    Grid.Row="8"
                                    Grid.Column="0"
                                    Grid.ColumnSpan="3">
                                    <TextBlock
                                        Margin="0,0,0,8"
                                        FontWeight="Medium"
                                        Foreground="#555"
                                        Text="Role" />
                                    <ComboBox
                                        SelectedIndex="0"
                                        SelectedItem="{Binding Role, Mode=TwoWay}"
                                        Style="{StaticResource ComboBox}">
                                        <sys:String>Administrator</sys:String>
                                    </ComboBox>

                                    <TextBlock
                                        Name="RoleValidation"
                                        FontSize="14"
                                        Foreground="Red"
                                        Text="{Binding RoleError, Mode=TwoWay}" />
                                </StackPanel>

                                <!--  BUTTONS  -->
                                <StackPanel
                                    Grid.Row="9"
                                    Grid.Column="0"
                                    Grid.ColumnSpan="3"
                                    Margin="-8"
                                    Orientation="Horizontal">

                                    <Button
                                        Width="150"
                                        Command="{Binding CreateAdminCommand}"
                                        Content="Create Admin"
                                        Style="{StaticResource PrimaryButton}"
                                        Tag="{Binding IsLoading}" />

                                    <Button
                                        Width="100"
                                        Margin="15,0,0,0"
                                        Command="{Binding CancelCommand}"
                                        Content="Cancel"
                                        Style="{StaticResource SecondaryButton}" />

                                </StackPanel>
                            </Grid>

                        </StackPanel>
                    </ScrollViewer>


                </Grid>

            </Border>


        </Grid>
    </Grid>
</UserControl>