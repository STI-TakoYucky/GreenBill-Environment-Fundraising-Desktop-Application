<Window
    x:Class="GreenBill.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:GreenBill"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    Title="MainWindow"
    Width="1400"
    Height="900"
    Background="#F5F5F5"
    mc:Ignorable="d">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <!--  Top Navigation Bar  -->
        <DockPanel
            Grid.Row="0"
            VerticalAlignment="Top"
            Background="White"
            Visibility="{Binding ShowNavigation, Converter={StaticResource BooleanToVisibilityConverter}}">

            <!--  Logo  -->
            <Button
                Height="60"
                Margin="100,0,0,0"
                Background="Transparent"
                BorderThickness="0"
                Command="{Binding GoToHome}"
                Cursor="Hand"
                Style="{StaticResource TransparentButton}">
                <Image
                    Height="60"
                    VerticalAlignment="Center"
                    Source="/Assets/Images/logo.png" />
            </Button>


            <!--  Right Side Controls  -->
            <StackPanel
                Margin="0,0,100,0"
                HorizontalAlignment="Right"
                VerticalAlignment="Center"
                DockPanel.Dock="Right"
                Orientation="Horizontal">

                <!--  Start a Change Button  -->
                <Button
                    Height="30"
                    Command="{Binding GoToStep1}"
                    Content="Start a Change"
                    Style="{StaticResource PrimaryButton}" />

                <!-- Profile Image with Dropdown -->
                <Button Width="40"
                        Height="40"
                        Margin="15,0,0,0"
                        BorderThickness="0"
                        Background="Transparent"
                        Cursor="Hand"
                        Style="{StaticResource TransparentButton}"
                        Click="ProfileButton_Click"
                        Visibility="{Binding IsUserLoggedIn, Converter={StaticResource BooleanToVisibilityConverter}}">

                    <Image
                        Width="40"
                        Height="40"
                        Source="/Assets/Images/defaultProfile.jpg"
                        Stretch="UniformToFill">
                        <Image.Clip>
                            <EllipseGeometry
                                Center="20,20"
                                RadiusX="20"
                                RadiusY="20" />
                        </Image.Clip>
                    </Image>

                    <!--  Dropdown Menu  -->
                    <Button.ContextMenu>
                        <ContextMenu x:Name="ProfileMenu">
                            <MenuItem Command="{Binding GoToDashboard}" Header="Dashboard" />
                            <MenuItem Command="{Binding GoToAdminDashboard}" Header="Admin Dashboard" />
                            <MenuItem Command="{Binding LogoutCommand}" Header="Logout" />
                            <MenuItem Header="My Campaigns" Command="{Binding GoToDashboard}" />
                            <MenuItem Header="Logout" Command="{Binding Logout}" />
                        </ContextMenu>
                    </Button.ContextMenu>
                </Button>

                <!--  Sign In Button (shown when not logged in)  -->
                <Button
                    Margin="15,0,0,0"
                    VerticalAlignment="Center"
                    Background="Transparent"
                    BorderThickness="0"
                    Command="{Binding NavigateToSignin}"
                    Content="Sign In"
                    Cursor="Hand"
                    FontFamily="./Assets/Fonts/#Poppins"
                    FontSize="15"
                    FontWeight="Bold"
                    Foreground="#6E6A6A"
                    Style="{StaticResource TransparentButton}"
                    Visibility="{Binding IsUserLoggedIn, Converter={StaticResource InverseBooleanToVisibilityConverter}}" />
            </StackPanel>
        </DockPanel>

        <!--  Main Content Area  -->
        <ContentControl Grid.Row="1" Content="{Binding Navigation.CurrentView}" />
    </Grid>
</Window>
